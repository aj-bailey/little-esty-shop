<h1> Admin Dashboard </h1>

<%= link_to "New Merchant", new_admin_merchant_path %>

<div id="Enabled_Merchants">
  <h3>Enabled Merchants</h3>
  <% @enabled_merchants.each do |merchant| %>
    <div id = "Merchant-<%=merchant.id%>">
      <p><%= link_to "#{merchant.name}", admin_merchant_path(merchant)%>
        <%=button_to "Disable", admin_merchant_path(merchant), method: :patch, params: {merchant:{ status: "Disabled"} } %>
      </p> 
    </div>
  <% end %>
</div>

<div id="Disabled_Merchants">
  <h3>Disabled Merchants</h3>
  <% @disabled_merchants.each do |merchant| %>
    <div id = "Merchant-<%=merchant.id%>">
      <p><%= link_to "#{merchant.name}", admin_merchant_path(merchant)%>
        <%=button_to "Enable", admin_merchant_path(merchant), method: :patch, params: {merchant:{status: "Enabled"} } %>
      </p>
    </div>
  <% end %>
</div>

<div id="top_merchants">
  <h3>Top Merchants</h3>
  <ol>
    <% @top_merchants_by_revenue.each do |merchant| %>
      <div id="top_merchant-<%= merchant.id %>">
        <li>
          <%= link_to "#{merchant.name}", admin_merchant_path(merchant) %>
          <%= "- #{number_to_currency((merchant.revenue.to_f/100).truncate, precision: 0)} in sales" %>
        </li>
      </div>
    <% end %>
  </ol>
</div>